@use "../../Shared/css/template/dtm/utils/scope";
@use "../../Shared/css/template/dtm/utils/text";
@use "../../Shared/css/template/dtm/utils/vendor-rules";
@use "../../Shared/css/template/dtm/components/nav";
@use "../models/colors";
@use "../models/fonts";

@mixin model {
    .header {
        font-size: 1rem;
    
        &__group {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
    }
    
    .title {
        @include fonts.first(3em, 1.25);
        color: colors.get(second);
        @include text.wrap;
        text-align: center;
    
        strong {
            @include fonts.third(1.2em, 1);
        }
    }
    
    @include scope.for-desktop {
        .header {
            &__logo {
                flex: 0 0 355px;
            }
        }
    }
    
    @include scope.for-mobile {
        .header {
            font-size: .4em;
    
            &__logo {
                flex: 0 1 10em;
            }
    
            &__title {
                text-align: left;
            }
        }
    }
}

@mixin transition-opacity-transform (
    $opacity: 0, 
    $translateX: 0, 
    $transition: true
) {
    opacity: $opacity;
    transform: translateX($translateX);
    @if ($transition) {
        transition: 
            opacity .3s ease-in-out, 
            transform .3s ease-in-out;
    }

    @content;
}

@mixin is-visible (
    $translate: translateX(0),
    $opacity: 0
) {
    @include vendor-rules.keyframes(is-visible) {
        0% {
            visibility: visible;
            transform: $translate;
            opacity: $opacity;
        }
        100% {
            transform: translate(0);
            opacity: 1;
            visibility: visible;
        }
    }
}

@mixin is-hidden (
    $translate: translateX(0),
    $opacity: 0
) {
    @include vendor-rules.keyframes(is-hidden) {
        0% {
            visibility: visible;
            transform: translate(0);
            opacity: 1;
        }
        99% {
            transform: $translate;
            opacity: $opacity;
            visibility: visible;
        }
        100% {
            visibility: hidden;
        }
    }
}

@mixin nav {
    @include is-hidden;
    @include is-visible;

    @include nav.ui {
        background: colors.get(_white);
        box-shadow: 0 0 1.25em rgba(0, 0, 0, 0.35);
        font-size: 1rem;
        position: sticky;
        top: 0;

        &__pane {
            position: relative;
            background: transparent; 

            &::before,
            &::after {
                content: "";
                position: absolute;
                top: 0;
                bottom: 0;
                left: 0;
                right: 0;
                transition: opacity .3s ease-in-out;
            }

            &::before {
                background: linear-gradient(white, #eeeeee);
            }

            &::after {
                background: white;
            }
        }
    
        &__group {
            flex-wrap: wrap;
            justify-self: center;
            position: relative;
            z-index: 1;
        }
    
        &__list,
        &__title {
            flex: 1 1 100%;
        }
    
        &__header {
            flex: 1 1 100%;
            padding: 2em 0;
        }
    
        &__title {
            margin: auto;
            align-items: center;
    
            h1 {
                @include fonts.first(4em, 1);
                color: colors.get(second);
                @include text.wrap;

                strong {
                    @include fonts.third(1em, 1);
                }
            }
        }
    
        &__list {
            @include fonts.second(1.5em, 1);
            text-transform: uppercase;
            display: flex;
            justify-content: space-around;
            align-items: center;
    
            > a {
                display: block;
            }
        }

        &__link {
            flex: 0 1 auto;
            padding: 1.25em;
        }

        &__logo {
            flex: 0 1 13em;
        }

        @content;
    };
    
    @include scope.for-desktop {
        .nav {
            position: relative;
            
            &__list {
                @include transition-opacity-transform(1, 5%);
            }
            
            &__logo,
            &__deal {
                opacity: 0;
                visibility: hidden;
            }

            &__logo {
                width: 13em;
            }

            &__pane {
                border-bottom: .15rem solid white;
            }

            &--is-primed {
                .nav {
                    &__logo,
                    &__deal {
                        @include vendor-rules.vendor-rule(animation, is-hidden .3s ease-in-out forwards);
                    }
                }
            }
            
            &--is-fixed {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                margin: auto;
                width: 100%;

                @supports (position: sticky) {
                    position: sticky;
                }

                .nav {
                    &__list {
                        @include transition-opacity-transform(1, 0, false);
                    }

                    &__pane {
                        &::after {
                            opacity: 0;
                        }
                    }

                    &__logo,
                    &__deal {
                       @include vendor-rules.vendor-rule(animation, is-visible .3s ease-in-out forwards);
                    }
                }

            }
        }
    }
    
    @include scope.for-mobile {
        .nav {
            background: colors.get(_white);
            padding: 0.75em;
            display: flex;
            align-items: center;
            justify-content: space-between;
    
            &__logo {
                flex: 0 1 15em;
            }
    
            &__label {
                font-size: 1.5em;
            }

            &__pane {
                .nav {
                    &__logo {
                        margin: 1em;
                    }
    
                    &__title {
                        padding: 0 1em 1em;
                    }
                }
            }

            &__link {
                padding: 1.5em 1em;
                order: 1;
            }

            &__deal {
                border: solid colors.get(first);
                border-width: 1px 0;
                background: #fafafa;
                flex: 1 1 100%;
                padding: 1em;
            }
    
            &__title {
                text-align: left;
                display: block;
                font-size: 1em;
            }
    
            &__list {
                flex-wrap: wrap;
                justify-content: flex-start;
                border: none;
            }
        }
    }
}